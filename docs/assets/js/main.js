"use strict";const btn=document.querySelector(".js-btn"),inputSearch=document.querySelector(".js-input"),movieList=document.querySelector(".js-movie-list"),favoritesList=document.querySelector(".js-favorites-list");let shows=[],favoriteShows=[];function search(){let e=inputSearch.value;fetch("http://api.tvmaze.com/search/shows?q="+e).then((function(e){return e.json()})).then((function(e){shows=e,paintMovies()})).catch(e=>{})}function paintMovies(){movieList.innerHTML="";for(let e=0;e<shows.length;e++){const t=shows[e].show,i=t.name,o=t.image&&t.image.medium||"https://via.placeholder.com/210x295/ffffff/666666/?text=TV",n=document.createElement("li");movieList.appendChild(n),n.textContent=" "+i;favoriteShows.find((function(e){return e.id===t.id}))&&n.classList.add("js-favorite");const s=document.createElement("img");s.setAttribute("src",o),n.appendChild(s);const a=new Date;n.addEventListener("click",(function(){console.log(a),toggleFavorite(t)})),movieList.appendChild(n)}paintFavorites(),setLocalStorage()}function toggleFavorite(e){if(favoriteShows.find((function(t){return t.id===e.id}))){const t=favoriteShows.findIndex((function(t){return t.id===e.id}));favoriteShows.splice(t,1)}else favoriteShows.push(e);paintMovies()}function paintFavorites(){favoritesList.innerHTML="";for(let e=0;e<favoriteShows.length;e++){const t=favoriteShows[e],i=t.name,o=t.image&&t.image.medium||"https://via.placeholder.com/210x295/ffffff/666666/?text=TV",n=document.createElement("li");n.textContent=""+i,n.classList.add("favorite-name");const s=document.createElement("img");s.setAttribute("src",o),n.appendChild(s),favoritesList.appendChild(n);const a=document.createElement("img");a.src="./assets/images/cancelar.png",a.setAttribute("alt","Borrar imagen"),a.classList.add("delete-image"),n.appendChild(a),a.addEventListener("click",(function(){toggleFavorite(t)}))}}function setLocalStorage(){localStorage.setItem("favoriteShows",JSON.stringify(favoriteShows))}function getLocalStorage(){favoriteShows=JSON.parse(localStorage.getItem("favoriteShows")||"[]")}btn.addEventListener("click",search),getLocalStorage(),paintFavorites();